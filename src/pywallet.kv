#:kivy 1.10.0

#:import ROUND_DIGITS pywalib.ROUND_DIGITS
#:import NavigationDrawerTwoLineListItem pywallet.navigationdrawer.NavigationDrawerTwoLineListItem
#:import CustomMDSwitch pywallet.selectioncontrols.CustomMDSwitch
#:import FloatInput pywallet.textfields.FloatInput
#:import MDList kivymd.list.MDList
#:import MDSlider kivymd.slider.MDSlider
#:import MDTextField kivymd.textfields.MDTextField
#:import QRCodeWidget kivy.garden.qrcode
#:import MDNavigationDrawer kivymd.navigationdrawer.MDNavigationDrawer
#:import NavigationLayout kivymd.navigationdrawer.NavigationLayout


<PushUp@BoxLayout>:
    # need this hack to push widgets up
    id: push_up


<Navigation@NavigationLayout>:
    MDNavigationDrawer:
        id: navigation_drawer
        NavigationDrawerTwoLineListItem:
            text: "Account"
            secondary_text: self.address_property
            on_release: app.controller.load_switch_account()
        NavigationDrawerIconButton:
            icon: "home"
            text: "Home"
            on_release: app.controller.load_landing_page()
        NavigationDrawerIconButton:
            icon: "key"
            text: "Account"
            on_release: app.controller.load_manage_keystores()
        NavigationDrawerIconButton:
            icon: "help"
            text: "About"
            on_release: app.controller.load_about_screen()


<PWSelectList>:
    orientation: 'vertical'
    ScrollView:
        do_scroll_x: False
        MDList:
            id: address_list_id


<Send>:
    orientation: 'vertical'
    # TODO: handle from address
    MDTextField:
        hint_text: "To"
        helper_text: "Receiver Ethereum address"
        helper_text_mode: "persistent"
        required: True
        write_tab: False
        text: root.send_to_address
        on_text: root.send_to_address = args[1]
    MDRaisedButton:
        text: "Flash QR Code"
        on_release: app.controller.load_flash_qr_code()
    FloatInput:
        hint_text: "Amount ETH (e.g. 1.10)"
        required: True
        write_tab: False
        text: str(round(root.send_amount, ROUND_DIGITS))
        on_text: root.send_amount = args[1]
    AnchorLayout:
        MDRaisedButton:
            id: send_button_id
            text: "Send"
            on_release: root.on_send_click()
    PushUp:


<Receive>:
    orientation: 'vertical'
    AddressButton:
        address_property: root.address_property
        on_release: app.controller.open_address_options()
    QRCodeWidget:
        id: qr_code_id


# transactions history
<History>:
    orientation: 'vertical'
    ScrollView:
        MDList:
            id: history_list_id


<ScrollableLabel>:
    MDLabel:
        size_hint_y: None
        height: self.texture_size[1]
        text_size: self.width, None
        text: root.text


<PWToolbar>:
    title: root.title_property
    md_bg_color: app.theme_cls.primary_color
    background_palette: 'Primary'
    background_hue: '500'
