#:kivy 1.10.0

#:import MDList kivymd.list.MDList
#:import Toolbar kivymd.toolbar.Toolbar
#:import MDTextField kivymd.textfields.MDTextField
#:import MDBottomNavigation kivymd.tabs.MDBottomNavigation
#:import MDDropdownMenu kivymd.menu.MDDropdownMenu
#:import QRCodeWidget kivy.garden.qrcode


<PWSelectList@BoxLayout>:
    orientation: 'vertical'
    ScrollView:
        do_scroll_x: False
        MDList:
            id: address_list_id

<Send@BoxLayout>:
    orientation: 'vertical'
    # TODO: handle from address
    MDTextField:
        id: send_to_address_id
        hint_text: "To"
        helper_text: "Receiver Ethereum address"
        helper_text_mode: "persistent"
        required: True
    FloatInput:
        id: send_amount_id
        hint_text: "Amount ETH (e.g. 1.10)"
        required: True
    MDRaisedButton:
        pos_hint: {'center_x': 0.5}
        text: "Send"
        on_release: self.parent.on_send_click()

<Receive@BoxLayout>:
    orientation: 'vertical'
    MDFlatButton:
        pos_hint: {'center_x': 0.5, 'top': 1}
        size_hint: None, None
        text: root.current_account_string
        on_release: root.open_account_list()
    QRCodeWidget:
        id: qr_code_id

<Overview@BoxLayout>:
    orientation: 'vertical'
    MDLabel:
        id: balance_label_id
        size_hint_y: None
        height: dp(40)
        font_style: 'Display1'
        halign: 'center'
        text: '0 ETH'
    MDFlatButton:
        pos_hint: {'center_x': 0.5, 'top': 1}
        size_hint: None, None
        text: root.current_account_string
        on_release: root.open_account_list()
    History:
        id: history_id


# transactions history
<History@BoxLayout>:
    orientation: 'vertical'
    ScrollView:
        MDList:
            id: history_list_id

<Controller>:

    BoxLayout:
        orientation: 'vertical'
        Toolbar:
            id: toolbar_id
            title: 'PyWallet'
            md_bg_color: app.theme_cls.primary_color
            background_palette: 'Primary'
            background_hue: '500'
            left_action_items: [['menu', lambda x: None]]
            right_action_items: [['dots-vertical', lambda x: None]]
        ScreenManager:
            id: screen_manager_id

            Screen:
                name: 'overview'
                MDBottomNavigation:
                    id: bottom_navigation_id
                    MDBottomNavigationItem:
                        name: 'overview'
                        text: "Overview"
                        icon: 'format-list-bulleted'
                        Overview:
                            id: overview_id
                    MDBottomNavigationItem:
                        name: 'send'
                        text: "Send"
                        icon: 'arrow-up-bold'
                        Send:
                            pos_hint: {'top': 0.8}
                            size_hint_y: None
                            id: send_id
                    MDBottomNavigationItem:
                        name: 'receive'
                        text: "Receive"
                        icon: 'arrow-down-bold'
                        Receive:
                            id: receive_id

            Screen:
                name: 'manage_keystores'
                BoxLayout:
                    orientation: 'vertical'
                    MDLabel:
                        font_style: 'Display1'
                        halign: 'center'
                        valign: 'middle'
                        text: 'Keystore not found'
                    MDLabel:
                        halign: 'center'
                        valign: 'middle'
                        text: 'Copy it in to the keystore directory.\n%s' % root.get_keystore_path()
